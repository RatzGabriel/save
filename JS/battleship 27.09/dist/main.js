(()=>{"use strict";const e=function(){let e=[["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""]],a=[],r=[],o=0;return 4===o?alert("all ships sunk"):{placeShip:(r,o,t)=>{let l=function(e,a,r){let o=r,t=0,l={y:{yCoords:[],yHit:[]},x:e};for(let e=a;e<a+r;e++)l.y.yCoords.push(e);return{shipLength:o,hp:t,coords:l,hit:(e,a)=>{if(l.y.yCoords.some((e=>e==a))&&e==l.x){if(1==l.y.yCoords)return alert("already a hit ,try again");l.y.yHit.push(a),t+=1}},isSunk:()=>(console.log(t,r),t>=r)}}(r,o,t);for(let i=o+l.shipLength-1;i>=o;i--){if(""!==e[i][r]||o+t>e.length||r>e[o].length)return!1;if(i==o){for(let a=o+l.shipLength-1;a>=o;a--)e[a][r]="Ship";a.push(l)}}return e},gameBoard:e,ships:a,missedHit:r,receiveAttack:(t,l)=>{a.forEach((a=>a.coords.y.yCoords.some((e=>e===l))&&!a.coords.y.yHit.some((e=>e===l))&&a.coords.x==t?(console.log("hit"),a.hit(t,l),1==a.isSunk()?(o+=1,e[l][t]="hit",3===o?alert("all ships sunk"):alert("sunk this ship")):e[l][t]="hit"):r.push([t,l])))}}},a=function(){let a=e();return{placeShips:(e,r,o)=>{a.placeShip(e,r,o)},placedShips:0,gameBoardPlayer:a}};!function e(a){const r=document.getElementById("player"),o=document.getElementById("pc");let t=a.playerOne.gameBoardPlayer.gameBoard,l=a.pc.gameBoardPlayer.gameBoard;r.innerHTML="",o.innerHTML="",t.forEach(((o,t)=>{o.forEach(((o,l)=>{let i=document.createElement("div");i.className="cellDiv",i.innerText=o,r.appendChild(i),i.addEventListener("click",(function(){a.pc.gameBoardPlayer.receiveAttack(l,t),e(a)}))}))})),l.forEach(((r,t)=>{r.forEach(((r,l)=>{let i=document.createElement("div");i.className="cellDiv",i.innerText=r,o.appendChild(i),i.addEventListener("click",(function(){a.playerOne.gameBoardPlayer.receiveAttack(l,t),e(a)}))}))}))}(function(){let e=a(),r=a();return e.gameBoardPlayer.placeShip(3,2,4),e.gameBoardPlayer.placeShip(4,3,3),e.gameBoardPlayer.placeShip(6,5,1),r.gameBoardPlayer.placeShip(2,3,3),r.gameBoardPlayer.placeShip(6,4,3),r.gameBoardPlayer.placeShip(1,1,3),{playerOne:e,pc:r,attackPlayer:function a(){let{randomCoordsY:r,randomCoordsX:o}={randomCoordsY:Math.floor(Math.random()*e.gameBoardPlayer.gameBoard.length),randomCoordsX:Math.floor(Math.random()*e.gameBoardPlayer.gameBoard[0].length)};for(let n=0;n<e.gameBoardPlayer.ships.length;n++){if(e.gameBoardPlayer.ships[n].coords.y==r)for(let r=0;r<e.gameBoardPlayer.ships[n].coords.x.xHit.length;r++)e.gameBoardPlayer.ships[n].coords.x.xHit[r]==o&&a();if(e.gameBoardPlayer.ships[n].coords.y==r)for(let a=0;a<e.gameBoardPlayer.ships[n].coords.x.xCoords.length;a++)if(e.gameBoardPlayer.ships[n].coords.x.xCoords[a]==o)return t=o,l=r,i=e.gameBoardPlayer,console.log(i),void i.receiveAttack(t,l)}var t,l,i;a()}}}())})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQVVWLGdCQUFnQnpCLE1BQU1jLEdBQUdILE9BQU9OLEVBQUVvRCxRQUFRRixJQUNwREosRUFFQSxPQTVDSTlDLEVBNkNGOEMsRUE3Q0s3QyxFQThDTDRDLEVBOUNRUSxFQStDUnZCLEVBQVVWLGdCQTlDcEJMLFFBQVFDLElBQUlxQyxRQUNaQSxFQUFvQnBDLGNBQWNqQixFQUFHQyxHQUYxQixJQUFDRCxFQUFHQyxFQUFHb0QsRUFxRGxCVCxNRGpFTyxLIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC0yNy4wOS8uL3NyYy9zaGlwZmFjdG9yeS9zaGlwZmFjdG9yeS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLTI3LjA5Ly4vc3JjL2dhbWVCb2FyZC9nYW1lYm9hcmQuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC0yNy4wOS8uL3NyYy9wbGF5ZXIvcGxheWVyRmFjdG9yeS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLTI3LjA5Ly4vc3JjL2RvbS9kb20uanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC0yNy4wOS8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLTI3LjA5Ly4vc3JjL2dhbWVmbG93L2dhbWVmbG93LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGNyZWF0ZVNoaXAoeCwgeSwgbGVuZ3RoKSB7XG4gIGxldCBzaGlwTGVuZ3RoID0gbGVuZ3RoO1xuICBsZXQgaHAgPSAwO1xuICBsZXQgY29vcmRzID0ge1xuICAgIHk6IHtcbiAgICAgIHlDb29yZHM6IFtdLFxuICAgICAgeUhpdDogW10sXG4gICAgfSxcbiAgICB4LFxuICB9O1xuXG4gIGZvciAobGV0IGkgPSB5OyBpIDwgeSArIGxlbmd0aDsgaSsrKSB7XG4gICAgY29vcmRzLnkueUNvb3Jkcy5wdXNoKGkpO1xuICB9XG5cbiAgbGV0IGhpdCA9ICh4LCB5KSA9PiB7XG4gICAgaWYgKGNvb3Jkcy55LnlDb29yZHMuc29tZSgoZWxlKSA9PiBlbGUgPT0geSkgJiYgeCA9PSBjb29yZHMueCkge1xuICAgICAgaWYgKGNvb3Jkcy55LnlDb29yZHMgPT0gdHJ1ZSkgcmV0dXJuIGFsZXJ0KCdhbHJlYWR5IGEgaGl0ICx0cnkgYWdhaW4nKTtcbiAgICAgIGNvb3Jkcy55LnlIaXQucHVzaCh5KTtcbiAgICAgIGhwICs9IDE7XG4gICAgfVxuICB9O1xuXG4gIGxldCBpc1N1bmsgPSAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coaHAsIGxlbmd0aCk7XG4gICAgcmV0dXJuIGhwID49IGxlbmd0aCA/IHRydWUgOiBmYWxzZTtcbiAgfTtcblxuICByZXR1cm4geyBzaGlwTGVuZ3RoLCBocCwgY29vcmRzLCBoaXQsIGlzU3VuayB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVTaGlwO1xuIiwiaW1wb3J0IGNyZWF0ZVNoaXAgZnJvbSAnLi4vc2hpcGZhY3Rvcnkvc2hpcGZhY3RvcnknO1xuXG5mdW5jdGlvbiBnYW1lQm9hcmQoKSB7XG4gIGxldCBnYW1lQm9hcmQgPSBbXG4gICAgWycnLCAnJywgJycsICcnLCAnJywgJycsICcnLCAnJywgJycsICcnXSxcbiAgICBbJycsICcnLCAnJywgJycsICcnLCAnJywgJycsICcnLCAnJywgJyddLFxuICAgIFsnJywgJycsICcnLCAnJywgJycsICcnLCAnJywgJycsICcnLCAnJ10sXG4gICAgWycnLCAnJywgJycsICcnLCAnJywgJycsICcnLCAnJywgJycsICcnXSxcbiAgICBbJycsICcnLCAnJywgJycsICcnLCAnJywgJycsICcnLCAnJywgJyddLFxuICAgIFsnJywgJycsICcnLCAnJywgJycsICcnLCAnJywgJycsICcnLCAnJ10sXG4gICAgWycnLCAnJywgJycsICcnLCAnJywgJycsICcnLCAnJywgJycsICcnXSxcbiAgICBbJycsICcnLCAnJywgJycsICcnLCAnJywgJycsICcnLCAnJywgJyddLFxuICAgIFsnJywgJycsICcnLCAnJywgJycsICcnLCAnJywgJycsICcnLCAnJ10sXG4gICAgWycnLCAnJywgJycsICcnLCAnJywgJycsICcnLCAnJywgJycsICcnXSxcbiAgXTtcbiAgbGV0IHNoaXBzID0gW107XG4gIGxldCBtaXNzZWRIaXQgPSBbXTtcbiAgbGV0IHN1bmtTaGlwcyA9IDA7XG5cbiAgbGV0IHBsYWNlU2hpcCA9ICh4LCB5LCBsZW5ndGgpID0+IHtcbiAgICBsZXQgc2hpcCA9IGNyZWF0ZVNoaXAoeCwgeSwgbGVuZ3RoKTtcbiAgICBmb3IgKGxldCBpID0geSArIHNoaXAuc2hpcExlbmd0aCAtIDE7IGkgPj0geTsgaS0tKSB7XG4gICAgICBpZiAoXG4gICAgICAgIGdhbWVCb2FyZFtpXVt4XSAhPT0gJycgfHxcbiAgICAgICAgeSArIGxlbmd0aCA+IGdhbWVCb2FyZC5sZW5ndGggfHxcbiAgICAgICAgeCA+IGdhbWVCb2FyZFt5XS5sZW5ndGhcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAoaSA9PSB5KSB7XG4gICAgICAgIGZvciAobGV0IGkgPSB5ICsgc2hpcC5zaGlwTGVuZ3RoIC0gMTsgaSA+PSB5OyBpLS0pIHtcbiAgICAgICAgICBnYW1lQm9hcmRbaV1beF0gPSAnU2hpcCc7XG4gICAgICAgIH1cblxuICAgICAgICBzaGlwcy5wdXNoKHNoaXApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZ2FtZUJvYXJkO1xuICB9O1xuXG4gIGxldCByZWNlaXZlQXR0YWNrID0gKHgsIHkpID0+IHtcbiAgICBzaGlwcy5mb3JFYWNoKChzaW5nbGVTaGlwKSA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgIHNpbmdsZVNoaXAuY29vcmRzLnkueUNvb3Jkcy5zb21lKChlbGUpID0+IGVsZSA9PT0geSkgJiZcbiAgICAgICAgIXNpbmdsZVNoaXAuY29vcmRzLnkueUhpdC5zb21lKChlbGUpID0+IGVsZSA9PT0geSkgJiZcbiAgICAgICAgc2luZ2xlU2hpcC5jb29yZHMueCA9PSB4XG4gICAgICApIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2hpdCcpO1xuXG4gICAgICAgIHNpbmdsZVNoaXAuaGl0KHgsIHkpO1xuICAgICAgICBpZiAoc2luZ2xlU2hpcC5pc1N1bmsoKSA9PSB0cnVlKSB7XG4gICAgICAgICAgc3Vua1NoaXBzICs9IDE7XG4gICAgICAgICAgZ2FtZUJvYXJkW3ldW3hdID0gJ2hpdCc7XG4gICAgICAgICAgaWYgKHN1bmtTaGlwcyA9PT0gMykgcmV0dXJuIGFsZXJ0KCdhbGwgc2hpcHMgc3VuaycpO1xuICAgICAgICAgIHJldHVybiBhbGVydCgnc3VuayB0aGlzIHNoaXAnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKGdhbWVCb2FyZFt5XVt4XSA9ICdoaXQnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBtaXNzZWRIaXQucHVzaChbeCwgeV0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIGlmIChzdW5rU2hpcHMgPT09IDQpIHJldHVybiBhbGVydCgnYWxsIHNoaXBzIHN1bmsnKTtcblxuICByZXR1cm4geyBwbGFjZVNoaXAsIGdhbWVCb2FyZCwgc2hpcHMsIG1pc3NlZEhpdCwgcmVjZWl2ZUF0dGFjayB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBnYW1lQm9hcmQ7XG4iLCJpbXBvcnQgZ2FtZUJvYXJkIGZyb20gJy4uL2dhbWVCb2FyZC9nYW1lYm9hcmQnO1xuXG5mdW5jdGlvbiBwbGF5ZXJGYWN0b3J5KCkge1xuICBsZXQgcGxhY2VkU2hpcHMgPSAwO1xuICBsZXQgZ2FtZUJvYXJkUGxheWVyID0gZ2FtZUJvYXJkKCk7XG4gIGxldCBwbGFjZVNoaXBzID0gKHgsIHksIGxlbmd0aCkgPT4ge1xuICAgIGlmIChwbGFjZWRTaGlwcyA+IDQpIHJldHVybiBhbGVydCgnVG9vIG1hbnkgU2hpcHMgcGxhY2VkJyk7XG4gICAgZ2FtZUJvYXJkUGxheWVyLnBsYWNlU2hpcCh4LCB5LCBsZW5ndGgpO1xuICB9O1xuICByZXR1cm4geyBwbGFjZVNoaXBzLCBwbGFjZWRTaGlwcywgZ2FtZUJvYXJkUGxheWVyIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IHBsYXllckZhY3Rvcnk7XG4iLCJmdW5jdGlvbiBjcmVhdGVEb20oZ2FtZSkge1xuICBjb25zdCBwbGF5ZXJEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGxheWVyJyk7XG4gIGNvbnN0IHBjRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BjJyk7XG5cbiAgbGV0IHBsYXllckJvYXJkID0gZ2FtZS5wbGF5ZXJPbmUuZ2FtZUJvYXJkUGxheWVyLmdhbWVCb2FyZDtcbiAgbGV0IHBjQm9hcmQgPSBnYW1lLnBjLmdhbWVCb2FyZFBsYXllci5nYW1lQm9hcmQ7XG4gIHBsYXllckRpdi5pbm5lckhUTUwgPSAnJztcbiAgcGNEaXYuaW5uZXJIVE1MID0gJyc7XG4gIHBsYXllckJvYXJkLmZvckVhY2goKHJvdywgaW5kZXgpID0+IHtcbiAgICByb3cuZm9yRWFjaCgoY2VsbCwgaW5kZXgyKSA9PiB7XG4gICAgICBsZXQgY2VsbERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICBjZWxsRGl2LmNsYXNzTmFtZSA9ICdjZWxsRGl2JztcbiAgICAgIGNlbGxEaXYuaW5uZXJUZXh0ID0gY2VsbDtcbiAgICAgIHBsYXllckRpdi5hcHBlbmRDaGlsZChjZWxsRGl2KTtcbiAgICAgIGNlbGxEaXYuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGdhbWUucGMuZ2FtZUJvYXJkUGxheWVyLnJlY2VpdmVBdHRhY2soaW5kZXgyLCBpbmRleCk7XG5cbiAgICAgICAgY3JlYXRlRG9tKGdhbWUpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHBjQm9hcmQuZm9yRWFjaCgocm93LCBpbmRleCkgPT4ge1xuICAgIHJvdy5mb3JFYWNoKChjZWxsLCBpbmRleDIpID0+IHtcbiAgICAgIGxldCBjZWxsRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICAgIGNlbGxEaXYuY2xhc3NOYW1lID0gJ2NlbGxEaXYnO1xuICAgICAgY2VsbERpdi5pbm5lclRleHQgPSBjZWxsO1xuICAgICAgcGNEaXYuYXBwZW5kQ2hpbGQoY2VsbERpdik7XG4gICAgICBjZWxsRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBnYW1lLnBsYXllck9uZS5nYW1lQm9hcmRQbGF5ZXIucmVjZWl2ZUF0dGFjayhpbmRleDIsIGluZGV4KTtcbiAgICAgICAgY3JlYXRlRG9tKGdhbWUpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVEb207XG4iLCJpbXBvcnQgY3JlYXRlU2hpcCBmcm9tICcuL3NoaXBmYWN0b3J5L3NoaXBmYWN0b3J5JztcbmltcG9ydCBnYW1lQm9hcmQgZnJvbSAnLi9nYW1lQm9hcmQvZ2FtZWJvYXJkJztcbmltcG9ydCBnYW1lIGZyb20gJy4vZ2FtZWZsb3cvZ2FtZWZsb3cnO1xuaW1wb3J0IGNyZWF0ZURvbSBmcm9tICcuL2RvbS9kb20nO1xuXG5sZXQgcGxheSA9IGdhbWUoKTtcbmNyZWF0ZURvbShwbGF5KTtcbiIsImltcG9ydCBwbGF5ZXJGYWN0b3J5IGZyb20gJy4uL3BsYXllci9wbGF5ZXJGYWN0b3J5JztcbmltcG9ydCBjcmVhdGVEb20gZnJvbSAnLi4vZG9tL2RvbSc7XG5cbmZ1bmN0aW9uIGdhbWUoKSB7XG4gIGxldCBwbGF5ZXJPbmUgPSBwbGF5ZXJGYWN0b3J5KCk7XG4gIGxldCBwYyA9IHBsYXllckZhY3RvcnkoKTtcblxuICBmdW5jdGlvbiBwbGFjZVNoaXBzKCkge1xuICAgIHBsYXllck9uZS5nYW1lQm9hcmRQbGF5ZXIucGxhY2VTaGlwKDMsIDIsIDQpO1xuICAgIHBsYXllck9uZS5nYW1lQm9hcmRQbGF5ZXIucGxhY2VTaGlwKDQsIDMsIDMpO1xuICAgIHBsYXllck9uZS5nYW1lQm9hcmRQbGF5ZXIucGxhY2VTaGlwKDYsIDUsIDEpO1xuXG4gICAgcGMuZ2FtZUJvYXJkUGxheWVyLnBsYWNlU2hpcCgyLCAzLCAzKTtcbiAgICBwYy5nYW1lQm9hcmRQbGF5ZXIucGxhY2VTaGlwKDYsIDQsIDMpO1xuICAgIHBjLmdhbWVCb2FyZFBsYXllci5wbGFjZVNoaXAoMSwgMSwgMyk7XG4gIH1cblxuICBsZXQgYXR0YWNrID0gKHgsIHksIHBsYXllckJvYXJkVG9BdHRhY2spID0+IHtcbiAgICBjb25zb2xlLmxvZyhwbGF5ZXJCb2FyZFRvQXR0YWNrKTtcbiAgICBwbGF5ZXJCb2FyZFRvQXR0YWNrLnJlY2VpdmVBdHRhY2soeCwgeSk7XG4gIH07XG5cbiAgbGV0IHJhbmRvbUNvb3Jkc1hhbmRZID0gKCkgPT4ge1xuICAgIGxldCByYW5kb21Db29yZHNZID0gTWF0aC5mbG9vcihcbiAgICAgIE1hdGgucmFuZG9tKCkgKiBwbGF5ZXJPbmUuZ2FtZUJvYXJkUGxheWVyLmdhbWVCb2FyZC5sZW5ndGhcbiAgICApO1xuXG4gICAgbGV0IHJhbmRvbUNvb3Jkc1ggPSBNYXRoLmZsb29yKFxuICAgICAgTWF0aC5yYW5kb20oKSAqIHBsYXllck9uZS5nYW1lQm9hcmRQbGF5ZXIuZ2FtZUJvYXJkWzBdLmxlbmd0aFxuICAgICk7XG5cbiAgICByZXR1cm4geyByYW5kb21Db29yZHNZLCByYW5kb21Db29yZHNYIH07XG4gIH07XG5cbiAgZnVuY3Rpb24gYXR0YWNrUGxheWVyKCkge1xuICAgIGxldCB7IHJhbmRvbUNvb3Jkc1ksIHJhbmRvbUNvb3Jkc1ggfSA9IHJhbmRvbUNvb3Jkc1hhbmRZKCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwbGF5ZXJPbmUuZ2FtZUJvYXJkUGxheWVyLnNoaXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAocGxheWVyT25lLmdhbWVCb2FyZFBsYXllci5zaGlwc1tpXS5jb29yZHMueSA9PSByYW5kb21Db29yZHNZKSB7XG4gICAgICAgIGZvciAoXG4gICAgICAgICAgbGV0IGogPSAwO1xuICAgICAgICAgIGogPCBwbGF5ZXJPbmUuZ2FtZUJvYXJkUGxheWVyLnNoaXBzW2ldLmNvb3Jkcy54LnhIaXQubGVuZ3RoO1xuICAgICAgICAgIGorK1xuICAgICAgICApIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBwbGF5ZXJPbmUuZ2FtZUJvYXJkUGxheWVyLnNoaXBzW2ldLmNvb3Jkcy54LnhIaXRbal0gPT0gcmFuZG9tQ29vcmRzWFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgYXR0YWNrUGxheWVyKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChwbGF5ZXJPbmUuZ2FtZUJvYXJkUGxheWVyLnNoaXBzW2ldLmNvb3Jkcy55ID09IHJhbmRvbUNvb3Jkc1kpIHtcbiAgICAgICAgZm9yIChcbiAgICAgICAgICBsZXQgaiA9IDA7XG4gICAgICAgICAgaiA8IHBsYXllck9uZS5nYW1lQm9hcmRQbGF5ZXIuc2hpcHNbaV0uY29vcmRzLngueENvb3Jkcy5sZW5ndGg7XG4gICAgICAgICAgaisrXG4gICAgICAgICkge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHBsYXllck9uZS5nYW1lQm9hcmRQbGF5ZXIuc2hpcHNbaV0uY29vcmRzLngueENvb3Jkc1tqXSA9PVxuICAgICAgICAgICAgcmFuZG9tQ29vcmRzWFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIGF0dGFjayhcbiAgICAgICAgICAgICAgcmFuZG9tQ29vcmRzWCxcbiAgICAgICAgICAgICAgcmFuZG9tQ29vcmRzWSxcbiAgICAgICAgICAgICAgcGxheWVyT25lLmdhbWVCb2FyZFBsYXllclxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgYXR0YWNrUGxheWVyKCk7XG4gIH1cbiAgcGxhY2VTaGlwcygpO1xuXG4gIHJldHVybiB7IHBsYXllck9uZSwgcGMsIGF0dGFja1BsYXllciB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBnYW1lO1xuIl0sIm5hbWVzIjpbImdhbWVCb2FyZCIsInNoaXBzIiwibWlzc2VkSGl0Iiwic3Vua1NoaXBzIiwiYWxlcnQiLCJwbGFjZVNoaXAiLCJ4IiwieSIsImxlbmd0aCIsInNoaXAiLCJzaGlwTGVuZ3RoIiwiaHAiLCJjb29yZHMiLCJ5Q29vcmRzIiwieUhpdCIsImkiLCJwdXNoIiwiaGl0Iiwic29tZSIsImVsZSIsImlzU3VuayIsImNvbnNvbGUiLCJsb2ciLCJyZWNlaXZlQXR0YWNrIiwiZm9yRWFjaCIsInNpbmdsZVNoaXAiLCJnYW1lQm9hcmRQbGF5ZXIiLCJwbGFjZVNoaXBzIiwicGxhY2VkU2hpcHMiLCJjcmVhdGVEb20iLCJnYW1lIiwicGxheWVyRGl2IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInBjRGl2IiwicGxheWVyQm9hcmQiLCJwbGF5ZXJPbmUiLCJwY0JvYXJkIiwicGMiLCJpbm5lckhUTUwiLCJyb3ciLCJpbmRleCIsImNlbGwiLCJpbmRleDIiLCJjZWxsRGl2IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImlubmVyVGV4dCIsImFwcGVuZENoaWxkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImF0dGFja1BsYXllciIsInJhbmRvbUNvb3Jkc1kiLCJyYW5kb21Db29yZHNYIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiaiIsInhIaXQiLCJ4Q29vcmRzIiwicGxheWVyQm9hcmRUb0F0dGFjayJdLCJzb3VyY2VSb290IjoiIn0=